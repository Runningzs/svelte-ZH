import"./typeof.15db5c64.js";import{_ as n}from"./slicedToArray.a2759e85.js";import"./_commonjsHelpers.7baa5521.js";import{_ as e,a as t}from"./asyncToGenerator.66a36f43.js";import{_ as o,a as r,b as a,c as i,i as s,s as c,d as u,S as l,e as f,F as d,o as m,f as p,g as v,G as h,h as g,q as $,j as w,R as b,l as _,m as y,H as k,n as x,T as j,C as z,L as E,a8 as T,k as S,a0 as U,t as O,y as N,v as A,z as L,u as I,w as P,ac as R,Z as D,W as M,p as B,P as C,r as J,X as F,V,a6 as H,a7 as K}from"./index.a0792a5e.js";import"./index.510d187e.js";import{a as G,g as W}from"./app.c4e382df.js";import{b as q}from"./index.bc539772.js";import{R as X}from"./Repl.2f644460.js";import{I as Y}from"./InputOutputToggle.1722f5cc.js";function Z(n){var e,t,o,r,a,i,s;return{c:function(){e=f("div"),t=f("a"),o=d("Your saved apps"),r=m(),a=f("button"),i=d("Log out"),this.h()},l:function(n){e=p(n,"DIV",{class:!0},!1);var s=v(e);t=p(s,"A",{href:!0,class:!0},!1);var c=v(t);o=h(c,"Your saved apps"),c.forEach(g),r=$(s),a=p(s,"BUTTON",{class:!0},!1);var u=v(a);i=h(u,"Log out"),u.forEach(g),s.forEach(g),this.h()},h:function(){w(t,"href","apps"),w(t,"class","svelte-1741g67"),w(a,"class","svelte-1741g67"),w(e,"class","menu svelte-1741g67"),s=b(a,"click",n.logout)},m:function(n,s){_(n,e,s),y(e,t),y(t,o),y(e,r),y(e,a),y(a,i)},d:function(n){n&&g(e),s()}}}function Q(n){var e,t,o,r,a,i,s,c,u,l=n.showMenu&&Z(n);return{c:function(){e=f("div"),t=f("span"),o=d(n.name),r=m(),a=f("img"),c=m(),l&&l.c(),this.h()},l:function(i){e=p(i,"DIV",{class:!0},!1);var s=v(e);t=p(s,"SPAN",{class:!0},!1);var u=v(t);o=h(u,n.name),u.forEach(g),r=$(s),a=p(s,"IMG",{alt:!0,src:!0,class:!0},!1),v(a).forEach(g),c=$(s),l&&l.l(s),s.forEach(g),this.h()},h:function(){w(t,"class","svelte-1741g67"),w(a,"alt",i=n.name+" avatar"),w(a,"src",s=n.$session.user.avatar),w(a,"class","svelte-1741g67"),w(e,"class","user svelte-1741g67"),u=[b(e,"mouseenter",n.mouseenter_handler),b(e,"mouseleave",n.mouseleave_handler)]},m:function(n,i){_(n,e,i),y(e,t),y(t,o),y(e,r),y(e,a),y(e,c),l&&l.m(e,null)},p:function(n,t){n.name&&k(o,t.name),n.name&&i!==(i=t.name+" avatar")&&w(a,"alt",i),n.$session&&s!==(s=t.$session.user.avatar)&&w(a,"src",s),t.showMenu?l||((l=Z(t)).c(),l.m(e,null)):l&&(l.d(1),l=null)},i:x,o:x,d:function(n){n&&g(e),l&&l.d(),j(u)}}}function nn(n,e,t){var o,r=G().session;z(n,r,function(n){t("$session",o=n)});var a,i=E("app").logout,s=!1;return n.$$.update=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{$session:1};n.$session&&t("name",a=o.user.name||o.user.username)},{session:r,logout:i,showMenu:s,name:a,$session:o,mouseenter_handler:function(){return t("showMenu",s=!0)},mouseleave_handler:function(){return t("showMenu",s=!1)}}}for(var en=function(n){function e(n){var t;return r(this,e),t=a(this,i(e).call(this)),s(u(t),n,nn,Q,c,[]),t}return o(e,l),e}(),tn=[],on=0;on<256;on++){for(var rn=on,an=0;an<8;an++)rn=1&rn?3988292384^rn>>>1:rn>>>1;tn[on]=rn}var sn=function(n){var e=-1,t=!0,o=!1,r=void 0;try{for(var a,i=n[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value;e=e>>>8^tn[255&(e^s)]}}catch(n){o=!0,r=n}finally{try{t||null==i.return||i.return()}finally{if(o)throw r}}return-1^e},cn=function(n,e){for(var t=[];e--;)t.push(255&n),n>>>=8;return t},un=function(n){return"string"==typeof n?T(n).map(function(n){return n.charCodeAt(0)}):n},ln=function(n){var e=[],t=[],o=!0,r=!1,a=void 0;try{for(var i,s=n[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var c=i.value,u=c.path,l=c.data,f=un(l),d=un(u),m=[10,0,0,0,0,0,0,0,0,0].concat(T(cn(sn(f),4)),T(cn(f.length,4)),T(cn(f.length,4)),T(cn(d.length,2)),[0,0]);t.push.apply(t,[80,75,1,2,20,0].concat(T(m),[0,0,0,0,0,0,0,0,0,0],T(cn(e.length,4)),T(d))),e=[].concat(T(e),[80,75,3,4],T(m),T(d),T(f))}}catch(n){r=!0,a=n}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}return[].concat(T(e),t,[80,75,5,6,0,0,0,0],T(cn(n.length,2)),T(cn(n.length,2)),T(cn(t.length,4)),T(cn(e.length,4)),[0,0])},fn=function(n){return new Blob([Uint8Array.from(ln(n))],{type:"application/zip"})},dn=function(n,e){var t=URL.createObjectURL(n),o=document.createElement("a");o.href=t,o.download=e,o.style.display="none",document.body.appendChild(o),o.click(),URL.revokeObjectURL(t),o.remove()};var mn,pn=(mn=13,function(n,e){function t(n){n.keyCode===mn&&e.call(this,n)}return n.addEventListener("keydown",t),{destroy:function(){n.removeEventListener("keydown",t)}}}),vn="undefined"!=typeof navigator&&"MacIntel"===navigator.platform;function hn(n){var e,t=new q({props:{name:"maximize"}});return{c:function(){t.$$.fragment.c()},l:function(n){t.$$.fragment.l(n)},m:function(n,o){O(t,n,o),e=!0},i:function(n){e||(I(t.$$.fragment,n),e=!0)},o:function(n){A(t.$$.fragment,n),e=!1},d:function(n){P(t,n)}}}function gn(n){var e,t=new q({props:{name:"close"}});return{c:function(){t.$$.fragment.c()},l:function(n){t.$$.fragment.l(n)},m:function(n,o){O(t,n,o),e=!0},i:function(n){e||(I(t.$$.fragment,n),e=!0)},o:function(n){A(t.$$.fragment,n),e=!1},d:function(n){P(t,n)}}}function $n(n){var e,t=new q({props:{name:"git-branch"}});return{c:function(){t.$$.fragment.c()},l:function(n){t.$$.fragment.l(n)},m:function(n,o){O(t,n,o),e=!0},i:function(n){e||(I(t.$$.fragment,n),e=!0)},o:function(n){A(t.$$.fragment,n),e=!1},d:function(n){P(t,n)}}}function wn(n){var e,t=new q({props:{name:"check"}});return{c:function(){t.$$.fragment.c()},l:function(n){t.$$.fragment.l(n)},m:function(n,o){O(t,n,o),e=!0},i:function(n){e||(I(t.$$.fragment,n),e=!0)},o:function(n){A(t.$$.fragment,n),e=!1},d:function(n){P(t,n)}}}function bn(n){var e,t=new q({props:{name:"save"}});return{c:function(){t.$$.fragment.c()},l:function(n){t.$$.fragment.l(n)},m:function(n,o){O(t,n,o),e=!0},i:function(n){e||(I(t.$$.fragment,n),e=!0)},o:function(n){A(t.$$.fragment,n),e=!1},d:function(n){P(t,n)}}}function _n(n){var e,t=new q({props:{name:"check"}});return{c:function(){t.$$.fragment.c()},l:function(n){t.$$.fragment.l(n)},m:function(n,o){O(t,n,o),e=!0},i:function(n){e||(I(t.$$.fragment,n),e=!0)},o:function(n){A(t.$$.fragment,n),e=!1},d:function(n){P(t,n)}}}function yn(n){var e,t,o,r,a,i,s=new q({props:{name:"log-in"}});return{c:function(){e=f("button"),s.$$.fragment.c(),t=m(),o=f("span"),r=d(" Log in to save"),this.h()},l:function(n){e=p(n,"BUTTON",{class:!0},!1);var a=v(e);s.$$.fragment.l(a),t=$(a),o=p(a,"SPAN",{class:!0},!1);var i=v(o);r=h(i," Log in to save"),i.forEach(g),a.forEach(g),this.h()},h:function(){w(o,"class","svelte-1ez15pl"),w(e,"class","icon svelte-1ez15pl"),i=b(e,"click",R(n.login))},m:function(n,i){_(n,e,i),O(s,e,null),y(e,t),y(e,o),y(o,r),a=!0},i:function(n){a||(I(s.$$.fragment,n),a=!0)},o:function(n){A(s.$$.fragment,n),a=!1},d:function(n){n&&g(e),P(s),i()}}}function kn(n){var e,t=new en({});return{c:function(){t.$$.fragment.c()},l:function(n){t.$$.fragment.l(n)},m:function(n,o){O(t,n,o),e=!0},i:function(n){e||(I(t.$$.fragment,n),e=!0)},o:function(n){A(t.$$.fragment,n),e=!1},d:function(n){P(t,n)}}}function xn(n){var e,t,o,r,a,i,s,c,u,l,d,h,k,x,z,E,T,R,D,M,B,C,J,F,V,H=[gn,hn],K=[];function G(n,e){return e.zen_mode?0:1}s=G(0,n),c=K[s]=H[s](n);var W=new q({props:{name:"download"}}),X=[wn,$n],Y=[];function Z(n,e){return e.justForked?0:1}k=Z(0,n),x=Y[k]=X[k](n);var Q=[_n,bn],nn=[];function en(n,e){return e.justSaved?0:1}R=en(0,n),D=nn[R]=Q[R](n);var tn=[kn,yn],on=[];function rn(n,e){return e.$session.user?0:1}return C=rn(0,n),J=on[C]=tn[C](n),{c:function(){e=f("div"),t=f("input"),r=m(),a=f("div"),i=f("button"),c.c(),u=m(),l=f("button"),W.$$.fragment.c(),d=m(),h=f("button"),x.c(),E=m(),T=f("button"),D.c(),B=m(),J.c(),this.h()},l:function(n){e=p(n,"DIV",{class:!0},!1);var o=v(e);t=p(o,"INPUT",{class:!0},!1),v(t).forEach(g),r=$(o),a=p(o,"DIV",{style:!0},!1);var s=v(a);i=p(s,"BUTTON",{class:!0,title:!0},!1);var f=v(i);c.l(f),f.forEach(g),u=$(s),l=p(s,"BUTTON",{class:!0,disabled:!0,title:!0},!1);var m=v(l);W.$$.fragment.l(m),m.forEach(g),d=$(s),h=p(s,"BUTTON",{class:!0,disabled:!0,title:!0},!1);var w=v(h);x.l(w),w.forEach(g),E=$(s),T=p(s,"BUTTON",{class:!0,disabled:!0,title:!0},!1);var b=v(T);D.l(b),b.forEach(g),B=$(s),J.l(s),s.forEach(g),o.forEach(g),this.h()},h:function(){w(t,"class","svelte-1ez15pl"),w(i,"class","icon svelte-1ez15pl"),w(i,"title","fullscreen editor"),w(l,"class","icon svelte-1ez15pl"),l.disabled=n.downloading,w(l,"title","download zip file"),w(h,"class","icon svelte-1ez15pl"),h.disabled=z=n.saving||!n.$session.user,w(h,"title","fork"),w(T,"class","icon svelte-1ez15pl"),T.disabled=M=n.saving||!n.$session.user,w(T,"title","save"),S(a,"text-align","right"),S(a,"margin-right",".4rem"),w(e,"class","app-controls svelte-1ez15pl"),V=[b(window,"keydown",n.handleKeydown),b(t,"input",n.input_input_handler),b(t,"focus",zn),b(i,"click",n.click_handler),b(l,"click",n.download),b(h,"click",n.click_handler_1),b(T,"click",n.save)]},m:function(c,f){_(c,e,f),y(e,t),U(t,n.name),o=pn.call(null,t,En)||{},y(e,r),y(e,a),y(a,i),K[s].m(i,null),y(a,u),y(a,l),O(W,l,null),y(a,d),y(a,h),Y[k].m(h,null),y(a,E),y(a,T),nn[R].m(T,null),y(a,B),on[C].m(a,null),F=!0},p:function(n,e){n.name&&t.value!==e.name&&U(t,e.name);var o=s;(s=G(0,e))!==o&&(N(),A(K[o],1,1,function(){K[o]=null}),L(),(c=K[s])||(c=K[s]=H[s](e)).c(),I(c,1),c.m(i,null)),F&&!n.downloading||(l.disabled=e.downloading);var r=k;(k=Z(0,e))!==r&&(N(),A(Y[r],1,1,function(){Y[r]=null}),L(),(x=Y[k])||(x=Y[k]=X[k](e)).c(),I(x,1),x.m(h,null)),F&&!n.saving&&!n.$session||z===(z=e.saving||!e.$session.user)||(h.disabled=z);var u=R;(R=en(0,e))!==u&&(N(),A(nn[u],1,1,function(){nn[u]=null}),L(),(D=nn[R])||(D=nn[R]=Q[R](e)).c(),I(D,1),D.m(T,null)),F&&!n.saving&&!n.$session||M===(M=e.saving||!e.$session.user)||(T.disabled=M);var f=C;(C=rn(0,e))!==f&&(N(),A(on[f],1,1,function(){on[f]=null}),L(),(J=on[C])||(J=on[C]=tn[C](e)).c(),I(J,1),J.m(a,null))},i:function(n){F||(I(c),I(W.$$.fragment,n),I(x),I(D),I(J),F=!0)},o:function(n){A(c),A(W.$$.fragment,n),A(x),A(D),A(J),F=!1},d:function(n){n&&g(e),o&&"function"==typeof o.destroy&&o.destroy(),K[s].d(),P(W),Y[k].d(),nn[R].d(),on[C].d(),j(V)}}}function jn(n){return new Promise(function(e){return setTimeout(e,n)})}var zn=function(n){return n.target.select()},En=function(n){return n.target.blur()};function Tn(n,o,r){var a,i=D(),s=G().session;z(n,s,function(n){r("$session",a=n)});var c=E("app").login,u=o.repl,l=o.gist,f=o.name,d=o.zen_mode,m=o.bundle,p=!1,v=!1,h=!1,g=!1;function $(n){return w.apply(this,arguments)}function w(){return(w=e(t.mark(function n(e){var o,a,s,c,l,d;return t.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r("saving",p=!0),o=u.toJSON(),a=o.components,n.prev=2,n.next=5,fetch("repl/create.json",{method:"POST",credentials:"include",body:JSON.stringify({name:f,files:a.map(function(n){return{name:"".concat(n.name,".").concat(n.type),source:n.source}})})});case 5:if(!((s=n.sent).status<200||s.status>=300)){n.next=12;break}return n.next=9,s.json();case 9:throw c=n.sent,l=c.error,new Error("Received an HTTP ".concat(s.status," response: ").concat(l));case 12:return n.next=14,s.json();case 14:if(d=n.sent,i("forked",{gist:d}),!e){n.next=23;break}return r("justSaved",h=!0),n.next=20,jn(600);case 20:r("justSaved",h=!1),n.next=27;break;case 23:return r("justForked",g=!0),n.next=26,jn(600);case 26:r("justForked",g=!1);case 27:n.next=32;break;case 29:n.prev=29,n.t0=n.catch(2),navigator.onLine?alert(n.t0.message):alert("It looks like you're offline! Find the internet and try again");case 32:r("saving",p=!1);case 33:case"end":return n.stop()}},n,null,[[2,29]])}))).apply(this,arguments)}function b(){return _.apply(this,arguments)}function _(){return(_=e(t.mark(function n(){var e,o,a,i,s;return t.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!p){n.next=2;break}return n.abrupt("return");case 2:if(k){n.next=5;break}return $(!0),n.abrupt("return");case 5:return r("saving",p=!0),n.prev=6,e=u.toJSON(),o=e.components,n.next=10,fetch("repl/".concat(l.uid,".json"),{method:"PATCH",credentials:"include",body:JSON.stringify({name:f,files:o.map(function(n){return{name:"".concat(n.name,".").concat(n.type),source:n.source}})})});case 10:if(!((a=n.sent).status<200||a.status>=300)){n.next=17;break}return n.next=14,a.json();case 14:throw i=n.sent,s=i.error,new Error("Received an HTTP ".concat(a.status," response: ").concat(s));case 17:return n.next=19,a.json();case 19:return r("justSaved",h=!0),n.next=22,jn(600);case 22:r("justSaved",h=!1),n.next=28;break;case 25:n.prev=25,n.t0=n.catch(6),navigator.onLine?alert(n.t0.message):alert("It looks like you're offline! Find the internet and try again");case 28:r("saving",p=!1);case 29:case"end":return n.stop()}},n,null,[[6,25]])}))).apply(this,arguments)}function y(){return(y=e(t.mark(function n(){var e,o,a,i,s,c,l;return t.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r("downloading",v=!0),e=u.toJSON(),o=e.components,a=e.imports,n.next=4,fetch("/svelte-app.json");case 4:return n.next=6,n.sent.json();case 6:i=n.sent,a.length>0&&(s=i.findIndex(function(n){return"package.json"===n.path}),c=JSON.parse(i[s].data),l=c.devDependencies,a.forEach(function(n){var e=/^(@[^\/]+\/)?[^@\/]+/.exec(n);l[e[0]]="latest"}),c.devDependencies=l,i[s].data=JSON.stringify(c,null,"  ")),i.push.apply(i,T(o.map(function(n){return{path:"src/".concat(n.name,".").concat(n.type),data:n.source}}))),i.push({path:"src/main.js",data:"import App from './App.svelte';\n\nvar app = new App({\n\ttarget: document.body\n});\n\nexport default app;"}),dn(fn(i),"svelte-app.zip"),r("downloading",v=!1);case 12:case"end":return n.stop()}},n)}))).apply(this,arguments)}var k;return n.$set=function(n){"repl"in n&&r("repl",u=n.repl),"gist"in n&&r("gist",l=n.gist),"name"in n&&r("name",f=n.name),"zen_mode"in n&&r("zen_mode",d=n.zen_mode),"bundle"in n&&r("bundle",m=n.bundle)},n.$$.update=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{$session:1,gist:1};(n.$session||n.gist)&&(k=a.user&&l&&l.owner===a.user.uid)},{session:s,login:c,repl:u,gist:l,name:f,zen_mode:d,bundle:m,saving:p,downloading:v,justSaved:h,justForked:g,handleKeydown:function(n){83===n.which&&(vn?n.metaKey:n.ctrlKey)&&(n.preventDefault(),b())},fork:$,save:b,download:function(){return y.apply(this,arguments)},$session:a,input_input_handler:function(){f=this.value,r("name",f)},click_handler:function(){return r("zen_mode",d=!d)},click_handler_1:function(){return $(!1)}}}var Sn=function(n){function e(n){var t;return r(this,e),t=a(this,i(e).call(this)),s(u(t),n,Tn,xn,c,["repl","gist","name","zen_mode","bundle"]),t}return o(e,l),e}(),Un=F.window;function On(n){var e,t;function o(t){n.inputoutputtoggle_checked_binding.call(null,t),e=!0,K(function(){return e=!1})}var r={};void 0!==n.checked&&(r.checked=n.checked);var a=new Y({props:r});return V.push(function(){return H(a,"checked",o)}),{c:function(){a.$$.fragment.c()},l:function(n){a.$$.fragment.l(n)},m:function(n,e){O(a,n,e),t=!0},p:function(n,t){var o={};!e&&n.checked&&(o.checked=t.checked),a.$set(o)},i:function(n){t||(I(a.$$.fragment,n),t=!0)},o:function(n){A(a.$$.fragment,n),t=!1},d:function(n){P(a,n)}}}function Nn(n){var e,t,o,r,a,i,s,c,u,l,d,h;function k(e){n.appcontrols_name_binding.call(null,e),s=!0,K(function(){return s=!1})}function x(e){n.appcontrols_zen_mode_binding.call(null,e),c=!0,K(function(){return c=!1})}M(n.onwindowresize),document.title=e=n.name+" • REPL • Svelte";var j={gist:n.gist,repl:n.repl};void 0!==n.name&&(j.name=n.name),void 0!==n.zen_mode&&(j.zen_mode=n.zen_mode);var z=new Sn({props:j});V.push(function(){return H(z,"name",k)}),V.push(function(){return H(z,"zen_mode",x)}),z.$on("forked",n.handle_fork);var E=function(n){var e,t,o,r,a={workersUrl:"workers",svelteUrl:n.svelteUrl,rollupUrl:n.rollupUrl,relaxed:n.relaxed,fixed:n.mobile,injectedJS:n.mapbox_setup},i=new X({props:a});n.repl_1_binding(i);var s=n.mobile&&On(n);return{c:function(){e=f("div"),i.$$.fragment.c(),t=m(),s&&s.c(),o=B(),this.h()},l:function(n){e=p(n,"DIV",{class:!0},!1);var r=v(e);i.$$.fragment.l(r),r.forEach(g),t=$(n),s&&s.l(n),o=B(),this.h()},h:function(){w(e,"class","viewport svelte-1jnlh7l"),C(e,"offset",n.checked)},m:function(n,a){_(n,e,a),O(i,e,null),_(n,t,a),s&&s.m(n,a),_(n,o,a),r=!0},p:function(n,t){var r={};n.svelteUrl&&(r.svelteUrl=t.svelteUrl),n.relaxed&&(r.relaxed=t.relaxed),n.mobile&&(r.fixed=t.mobile),i.$set(r),n.checked&&C(e,"offset",t.checked),t.mobile?s?(s.p(n,t),I(s,1)):((s=On(t)).c(),I(s,1),s.m(o.parentNode,o)):s&&(N(),A(s,1,1,function(){s=null}),L())},i:function(n){r||(I(i.$$.fragment,n),I(s),r=!0)},o:function(n){A(i.$$.fragment,n),A(s),r=!1},d:function(r){r&&g(e),n.repl_1_binding(null),P(i),r&&g(t),s&&s.d(r),r&&g(o)}}}(n);return{c:function(){t=f("meta"),o=f("meta"),r=f("meta"),a=m(),i=f("div"),z.$$.fragment.c(),u=m(),E&&E.c(),this.h()},l:function(n){t=p(n,"META",{name:!0,content:!0},!1),v(t).forEach(g),o=p(n,"META",{name:!0,content:!0},!1),v(o).forEach(g),r=p(n,"META",{name:!0,content:!0},!1),v(r).forEach(g),a=$(n),i=p(n,"DIV",{class:!0},!1);var e=v(i);z.$$.fragment.l(e),u=$(e),E&&E.l(e),e.forEach(g),this.h()},h:function(){w(t,"name","twitter:title"),w(t,"content","Svelte REPL"),w(o,"name","twitter:description"),w(o,"content","Cybernetically enhanced web apps"),w(r,"name","Description"),w(r,"content","Interactive Svelte playground"),w(i,"class",l="repl-outer "+(n.zen_mode?"zen-mode":"")+" svelte-1jnlh7l"),C(i,"mobile",n.mobile),h=b(Un,"resize",n.onwindowresize)},m:function(n,e){y(document.head,t),y(document.head,o),y(document.head,r),_(n,a,e),_(n,i,e),O(z,i,null),y(i,u),E&&E.m(i,null),d=!0},p:function(n,t){d&&!n.name||e===(e=t.name+" • REPL • Svelte")||(document.title=e);var o={};n.gist&&(o.gist=t.gist),n.repl&&(o.repl=t.repl),!s&&n.name&&(o.name=t.name),!c&&n.zen_mode&&(o.zen_mode=t.zen_mode),z.$set(o),E.p(n,t),d&&!n.zen_mode||l===(l="repl-outer "+(t.zen_mode?"zen-mode":"")+" svelte-1jnlh7l")||w(i,"class",l),(n.zen_mode||n.mobile)&&C(i,"mobile",t.mobile)},i:function(n){d||(I(z.$$.fragment,n),I(E),d=!0)},o:function(n){A(z.$$.fragment,n),A(E),d=!1},d:function(n){g(t),g(o),g(r),n&&(g(a),g(i)),P(z),E&&E.d(),h()}}}function An(n){var e=n.params;return{version:n.query.version||"3",id:e.id}}function Ln(e,t,o){var r,a,i,s=t.version,c=t.id,u=G().session;z(e,u,function(n){o("$session",r=n)});var l="Loading...",f=!1,d=!1,m=window.innerWidth,p=!1;function v(n){var e=[];"latest"!==n&&e.push("version=".concat(n));var t=e.length>0?"repl/".concat(c,"?").concat(e.join("&")):"repl/".concat(c);history.replaceState({},"x",t)}function h(e){i&&i.uid===e||fetch("repl/".concat(e,".json")).then(function(e){e.ok?e.json().then(function(e){o("gist",i=e),o("name",l=e.name),o("is_relaxed_gist",d=e.relaxed);var t=e.files.map(function(e){var t=e.name.split("."),o=n(t,2),r=o[0],a=o[1];return"html"===a&&(a="svelte"),{name:r,type:a,source:e.source}});t.sort(function(n,e){return"App"===n.name&&"svelte"===n.type?-1:"App"===e.name&&"svelte"===e.type?1:n.type!==e.type?"svelte"===n.type?-1:1:n.name<e.name?-1:1}),a.set({components:t})}):console.warn("TODO: 404 Gist")})}J(function(){"local"!==s&&fetch("https://unpkg.com/svelte@".concat(s||"3","/package.json")).then(function(n){return n.json()}).then(function(n){o("version",s=n.version)})});var g,$,w;return e.$set=function(n){"version"in n&&o("version",s=n.version),"id"in n&&o("id",c=n.id)},e.$$.update=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{version:1,id:1,width:1,is_relaxed_gist:1,$session:1,gist:1};n.version&&"undefined"!=typeof history&&v(s),n.id&&h(c),n.version&&o("svelteUrl",g="local"===s?"".concat(location.origin,"/repl/local"):"https://unpkg.com/svelte@".concat(s)),n.width&&o("mobile",$=m<540),(n.is_relaxed_gist||n.$session||n.gist)&&o("relaxed",w=d||r.user&&i&&r.user.uid===i.owner)},{version:s,id:c,session:u,repl:a,gist:i,name:l,zen_mode:f,width:m,checked:p,handle_fork:function(n){console.log("> handle_fork",n),o("gist",i=n.detail.gist),W("/repl/".concat(i.uid,"?version=").concat(s))},rollupUrl:"https://unpkg.com/rollup@1/dist/rollup.browser.js",mapbox_setup:"window.MAPBOX_ACCESS_TOKEN = undefined;",svelteUrl:g,mobile:$,relaxed:w,onwindowresize:function(){m=Un.innerWidth,o("width",m)},appcontrols_name_binding:function(n){o("name",l=n)},appcontrols_zen_mode_binding:function(n){o("zen_mode",f=n)},repl_1_binding:function(n){V[n?"unshift":"push"](function(){o("repl",a=n)})},inputoutputtoggle_checked_binding:function(n){o("checked",p=n)}}}var In=function(n){function e(n){var t;return r(this,e),t=a(this,i(e).call(this)),s(u(t),n,Ln,Nn,c,["version","id"]),t}return o(e,l),e}();export default In;export{An as preload};
