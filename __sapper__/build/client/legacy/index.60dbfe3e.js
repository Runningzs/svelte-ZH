import"./typeof.15db5c64.js";import"./_commonjsHelpers.7baa5521.js";import{_ as a,a as t}from"./asyncToGenerator.66a36f43.js";import{_ as n,a as s,b as e,c as r,i as o,s as u,d as f,S as c,o as i,e as p,q as l,f as h,g as v,h as m,j as d,l as g,n as b,L as E,F as x,G as y,R as j,ac as A,m as I,H as k,p as D,Q as H}from"./index.a0792a5e.js";function N(a,t,n){var s=Object.create(a);return s.app=t[n],s}function P(a){var t,n,s,e,r,o;return{c:function(){t=p("p"),n=x("Please "),s=p("a"),e=x("log in"),r=x(" to see your saved apps."),this.h()},l:function(a){t=h(a,"P",{},!1);var o=v(t);n=y(o,"Please "),s=h(o,"A",{href:!0},!1);var u=v(s);e=y(u,"log in"),u.forEach(m),r=y(o," to see your saved apps."),o.forEach(m),this.h()},h:function(){d(s,"href","auth/login"),o=j(s,"click",A(a.login))},m:function(a,o){g(a,t,o),I(t,n),I(t,s),I(s,e),I(t,r)},p:b,d:function(a){a&&m(t),o()}}}function _(a){for(var t,n,s,e,r,o,u,f,c,b,E,P,_,q,G,L,R,V,Y,F,T=a.user.name||a.user.username+"",U=a.apps,C=[],M=0;M<U.length;M+=1)C[M]=w(N(a,U,M));var O=null!==a.offset&&S(a);return{c:function(){t=p("header"),n=p("h1"),s=x("Your apps"),e=i(),r=p("div"),o=p("img"),c=i(),b=p("span"),E=x(T),P=x("\r\n\t\t\t\t\t("),_=p("a"),q=x("log out"),G=x(")"),L=i(),R=p("ul");for(var a=0;a<C.length;a+=1)C[a].c();V=i(),O&&O.c(),Y=D(),this.h()},l:function(a){t=h(a,"HEADER",{class:!0},!1);var u=v(t);n=h(u,"H1",{class:!0},!1);var f=v(n);s=y(f,"Your apps"),f.forEach(m),e=l(u),r=h(u,"DIV",{class:!0},!1);var i=v(r);o=h(i,"IMG",{class:!0,alt:!0,src:!0},!1),v(o).forEach(m),c=l(i),b=h(i,"SPAN",{},!1);var p=v(b);E=y(p,T),P=y(p,"\r\n\t\t\t\t\t("),_=h(p,"A",{href:!0},!1);var d=v(_);q=y(d,"log out"),d.forEach(m),G=y(p,")"),p.forEach(m),i.forEach(m),u.forEach(m),L=l(a),R=h(a,"UL",{class:!0},!1);for(var g=v(R),x=0;x<C.length;x+=1)C[x].l(g);g.forEach(m),V=l(a),O&&O.l(a),Y=D(),this.h()},h:function(){d(n,"class","svelte-2bannn"),d(o,"class","avatar svelte-2bannn"),d(o,"alt",u=(a.user.name||a.user.username)+" avatar"),d(o,"src",f=a.user.avatar),d(_,"href","auth/logout"),d(r,"class","user svelte-2bannn"),d(t,"class","svelte-2bannn"),d(R,"class","svelte-2bannn"),F=j(_,"click",A(a.logout))},m:function(a,u){g(a,t,u),I(t,n),I(n,s),I(t,e),I(t,r),I(r,o),I(r,c),I(r,b),I(b,E),I(b,P),I(b,_),I(_,q),I(b,G),g(a,L,u),g(a,R,u);for(var f=0;f<C.length;f+=1)C[f].m(R,null);g(a,V,u),O&&O.m(a,u),g(a,Y,u)},p:function(a,t){if(a.user&&u!==(u=(t.user.name||t.user.username)+" avatar")&&d(o,"alt",u),a.user&&f!==(f=t.user.avatar)&&d(o,"src",f),a.user&&T!==(T=t.user.name||t.user.username+"")&&k(E,T),a.apps||a.format){var n;for(U=t.apps,n=0;n<U.length;n+=1){var s=N(t,U,n);C[n]?C[n].p(a,s):(C[n]=w(s),C[n].c(),C[n].m(R,null))}for(;n<C.length;n+=1)C[n].d(1);C.length=U.length}null!==t.offset?O?O.p(a,t):((O=S(t)).c(),O.m(Y.parentNode,Y)):O&&(O.d(1),O=null)},d:function(a){a&&(m(t),m(L),m(R)),H(C,a),a&&m(V),O&&O.d(a),a&&m(Y),F()}}}function w(a){var t,n,s,e,r,o,u,f,c,b,E=a.app.name+"",j=a.format(a.app.updated_at)+"";return{c:function(){t=p("li"),n=p("a"),s=p("h2"),e=x(E),r=i(),o=p("span"),u=x("updated "),f=x(j),b=i(),this.h()},l:function(a){t=h(a,"LI",{class:!0},!1);var c=v(t);n=h(c,"A",{href:!0,class:!0},!1);var i=v(n);s=h(i,"H2",{class:!0},!1);var p=v(s);e=y(p,E),p.forEach(m),r=l(i),o=h(i,"SPAN",{class:!0},!1);var d=v(o);u=y(d,"updated "),f=y(d,j),d.forEach(m),i.forEach(m),b=l(c),c.forEach(m),this.h()},h:function(){d(s,"class","svelte-2bannn"),d(o,"class","svelte-2bannn"),d(n,"href",c="repl/"+a.app.uid),d(n,"class","svelte-2bannn"),d(t,"class","svelte-2bannn")},m:function(a,c){g(a,t,c),I(t,n),I(n,s),I(s,e),I(n,r),I(n,o),I(o,u),I(o,f),I(t,b)},p:function(a,t){a.apps&&E!==(E=t.app.name+"")&&k(e,E),a.apps&&j!==(j=t.format(t.app.updated_at)+"")&&k(f,j),a.apps&&c!==(c="repl/"+t.app.uid)&&d(n,"href",c)},d:function(a){a&&m(t)}}}function S(a){var t,n,s,e;return{c:function(){t=p("div"),n=p("a"),s=x("Next page..."),this.h()},l:function(a){t=h(a,"DIV",{},!1);var e=v(t);n=h(e,"A",{href:!0},!1);var r=v(n);s=y(r,"Next page..."),r.forEach(m),e.forEach(m),this.h()},h:function(){d(n,"href",e="apps?offset="+a.offset)},m:function(a,e){g(a,t,e),I(t,n),I(n,s)},p:function(a,t){a.offset&&e!==(e="apps?offset="+t.offset)&&d(n,"href",e)},d:function(a){a&&m(t)}}}function q(a){var t,n;function s(a,t){return t.user?_:P}var e=s(0,a),r=e(a);return{c:function(){t=i(),n=p("div"),r.c(),this.h()},l:function(a){t=l(a),n=h(a,"DIV",{class:!0},!1);var s=v(n);r.l(s),s.forEach(m),this.h()},h:function(){document.title="Your apps • Svelte",d(n,"class","apps svelte-2bannn")},m:function(a,s){g(a,t,s),g(a,n,s),r.m(n,null)},p:function(a,t){e===(e=s(0,t))&&r?r.p(a,t):(r.d(1),(r=e(t))&&(r.c(),r.m(n,null)))},i:b,o:b,d:function(a){a&&(m(t),m(n)),r.d()}}}function G(a,t){return L.apply(this,arguments)}function L(){return(L=a(t.mark(function a(n,s){var e,r,o,u,f,c;return t.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=s.user,r=[],o=null,!e){a.next=21;break}return u="apps.json",n.query.offset&&(u+="?offset=".concat(encodeURIComponent(n.query.offset))),a.next=8,this.fetch(u,{credentials:"include"});case 8:if((f=a.sent).ok){a.next=16;break}return a.t0=this,a.t1=f.status,a.next=14,f.text();case 14:return a.t2=a.sent,a.abrupt("return",a.t0.error.call(a.t0,a.t1,a.t2));case 16:return a.next=18,f.json();case 18:c=a.sent,r=c.apps,o=c.offset;case 21:return a.abrupt("return",{user:e,apps:r,offset:o});case 22:case"end":return a.stop()}},a,this)}))).apply(this,arguments)}function R(a,t,n){var s=t.user,e=t.apps,r=t.offset,o=E("app"),u=o.login,f=o.logout,c=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return a.$set=function(a){"user"in a&&n("user",s=a.user),"apps"in a&&n("apps",e=a.apps),"offset"in a&&n("offset",r=a.offset)},{user:s,apps:e,offset:r,login:u,logout:f,format:function(a){return c.format(new Date(a))}}}var V=function(a){function t(a){var n;return s(this,t),n=e(this,r(t).call(this)),o(f(n),a,R,q,u,["user","apps","offset"]),n}return n(t,c),t}();export default V;export{G as preload};
